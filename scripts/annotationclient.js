function string_to_array(str){for(var len=str.length,res=new Array(len),i=0;i<len;i++)res[i]=str.charCodeAt(i);return res}function array_to_hex_string(ary){for(var res="",i=0;i<ary.length;i++)res+=SHA256_hexchars[ary[i]>>4]+SHA256_hexchars[15&ary[i]];return res}function SHA256_init(){SHA256_H=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),SHA256_buf=new Array,SHA256_len=0}function SHA256_write(msg){SHA256_buf="string"==typeof msg?SHA256_buf.concat(string_to_array(msg)):SHA256_buf.concat(msg);for(var i=0;i+64<=SHA256_buf.length;i+=64)SHA256_Hash_Byte_Block(SHA256_H,SHA256_buf.slice(i,i+64));SHA256_buf=SHA256_buf.slice(i),SHA256_len+=msg.length}function SHA256_finalize(){if(SHA256_buf[SHA256_buf.length]=128,SHA256_buf.length>56){for(var i=SHA256_buf.length;i<64;i++)SHA256_buf[i]=0;SHA256_Hash_Byte_Block(SHA256_H,SHA256_buf),SHA256_buf.length=0}for(var i=SHA256_buf.length;i<59;i++)SHA256_buf[i]=0;SHA256_buf[59]=SHA256_len>>>29&255,SHA256_buf[60]=SHA256_len>>>21&255,SHA256_buf[61]=SHA256_len>>>13&255,SHA256_buf[62]=SHA256_len>>>5&255,SHA256_buf[63]=SHA256_len<<3&255,SHA256_Hash_Byte_Block(SHA256_H,SHA256_buf);for(var res=new Array(32),i=0;i<8;i++)res[4*i+0]=SHA256_H[i]>>>24,res[4*i+1]=SHA256_H[i]>>16&255,res[4*i+2]=SHA256_H[i]>>8&255,res[4*i+3]=255&SHA256_H[i];return delete SHA256_H,delete SHA256_buf,delete SHA256_len,res}function SHA256_hash(msg){var res;return SHA256_init(),SHA256_write(msg),res=SHA256_finalize(),array_to_hex_string(res)}function HMAC_SHA256_init(key){HMAC_SHA256_key="string"==typeof key?string_to_array(key):(new Array).concat(key),HMAC_SHA256_key.length>64&&(SHA256_init(),SHA256_write(HMAC_SHA256_key),HMAC_SHA256_key=SHA256_finalize());for(var i=HMAC_SHA256_key.length;i<64;i++)HMAC_SHA256_key[i]=0;for(var i=0;i<64;i++)HMAC_SHA256_key[i]^=54;SHA256_init(),SHA256_write(HMAC_SHA256_key)}function HMAC_SHA256_write(msg){SHA256_write(msg)}function HMAC_SHA256_finalize(){for(var md=SHA256_finalize(),i=0;i<64;i++)HMAC_SHA256_key[i]^=106;SHA256_init(),SHA256_write(HMAC_SHA256_key),SHA256_write(md);for(var i=0;i<64;i++)HMAC_SHA256_key[i]=0;return delete HMAC_SHA256_key,SHA256_finalize()}function HMAC_SHA256_MAC(key,msg){var res;return HMAC_SHA256_init(key),HMAC_SHA256_write(msg),res=HMAC_SHA256_finalize(),array_to_hex_string(res)}function SHA256_sigma0(x){return(x>>>7|x<<25)^(x>>>18|x<<14)^x>>>3}function SHA256_sigma1(x){return(x>>>17|x<<15)^(x>>>19|x<<13)^x>>>10}function SHA256_Sigma0(x){return(x>>>2|x<<30)^(x>>>13|x<<19)^(x>>>22|x<<10)}function SHA256_Sigma1(x){return(x>>>6|x<<26)^(x>>>11|x<<21)^(x>>>25|x<<7)}function SHA256_Ch(x,y,z){return z^x&(y^z)}function SHA256_Maj(x,y,z){return x&y^z&(x^y)}function SHA256_Hash_Word_Block(H,W){for(var i=16;i<64;i++)W[i]=SHA256_sigma1(W[i-2])+W[i-7]+SHA256_sigma0(W[i-15])+W[i-16]&4294967295;for(var state=(new Array).concat(H),i=0;i<64;i++){var T1=state[7]+SHA256_Sigma1(state[4])+SHA256_Ch(state[4],state[5],state[6])+SHA256_K[i]+W[i],T2=SHA256_Sigma0(state[0])+SHA256_Maj(state[0],state[1],state[2]);state.pop(),state.unshift(T1+T2&4294967295),state[4]=state[4]+T1&4294967295}for(var i=0;i<8;i++)H[i]=H[i]+state[i]&4294967295}function SHA256_Hash_Byte_Block(H,w){for(var W=new Array(16),i=0;i<16;i++)W[i]=w[4*i+0]<<24|w[4*i+1]<<16|w[4*i+2]<<8|w[4*i+3];SHA256_Hash_Word_Block(H,W)}!function(a,b){function c(b){var c=p(),d=c.querySelector("h2"),e=c.querySelector("p"),f=c.querySelector("button.cancel"),g=c.querySelector("button.confirm");if(d.innerHTML=u(b.title).split("\n").join("<br>"),e.innerHTML=u(b.text||"").split("\n").join("<br>"),b.text&&w(e),y(c.querySelectorAll(".icon")),b.type){for(var h=!1,i=0;i<n.length;i++)if(b.type===n[i]){h=!0;break}if(!h)return a.console.error("Unknown alert type: "+b.type),!1;var j=c.querySelector(".icon."+b.type);switch(w(j),b.type){case"success":s(j,"animate"),s(j.querySelector(".tip"),"animateSuccessTip"),s(j.querySelector(".long"),"animateSuccessLong");break;case"error":s(j,"animateErrorIcon"),s(j.querySelector(".x-mark"),"animateXMark");break;case"warning":s(j,"pulseWarning"),s(j.querySelector(".body"),"pulseWarningIns"),s(j.querySelector(".dot"),"pulseWarningIns")}}if(b.imageUrl){var k=c.querySelector(".icon.custom");k.style.backgroundImage="url("+b.imageUrl+")",w(k);var l=80,m=80;if(b.imageSize){var o=b.imageSize.split("x")[0],q=b.imageSize.split("x")[1];o&&q?(l=o,m=q,k.css({width:o+"px",height:q+"px"})):a.console.error("Parameter imageSize expects value with format WIDTHxHEIGHT, got "+b.imageSize)}k.setAttribute("style",k.getAttribute("style")+"width:"+l+"px; height:"+m+"px")}c.setAttribute("data-has-cancel-button",b.showCancelButton),b.showCancelButton?f.style.display="inline-block":y(f),b.cancelButtonText&&(f.innerHTML=u(b.cancelButtonText)),b.confirmButtonText&&(g.innerHTML=u(b.confirmButtonText)),g.className="confirm btn btn-lg",s(g,b.confirmButtonClass),c.setAttribute("data-allow-ouside-click",b.allowOutsideClick);var r=!!b.doneFunction;c.setAttribute("data-has-done-function",r)}function d(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function e(){var a=p();B(q(),10),w(a),s(a,"showSweetAlert"),t(a,"hideSweetAlert"),h=b.activeElement,a.querySelector("button.confirm").focus(),setTimeout(function(){s(a,"visible")},500)}function f(){var c=p();C(q(),5),C(c,5),t(c,"showSweetAlert"),s(c,"hideSweetAlert"),t(c,"visible");var d=c.querySelector(".icon.success");t(d,"animate"),t(d.querySelector(".tip"),"animateSuccessTip"),t(d.querySelector(".long"),"animateSuccessLong");var e=c.querySelector(".icon.error");t(e,"animateErrorIcon"),t(e.querySelector(".x-mark"),"animateXMark");var f=c.querySelector(".icon.warning");t(f,"pulseWarning"),t(f.querySelector(".body"),"pulseWarningIns"),t(f.querySelector(".dot"),"pulseWarningIns"),a.onkeydown=j,b.onclick=i,h&&h.focus(),k=void 0}function g(){p().style.marginTop=A(p())}var h,i,j,k,n=["error","warning","info","success"],o={title:"",text:"",type:null,allowOutsideClick:!1,showCancelButton:!1,closeOnConfirm:!0,closeOnCancel:!0,confirmButtonText:"OK",confirmButtonClass:"btn-primary",cancelButtonText:"Cancel",imageUrl:null,imageSize:null},p=function(){return b.querySelector(".sweet-alert")},q=function(){return b.querySelector(".sweet-overlay")},r=function(a,b){return new RegExp(" "+b+" ").test(" "+a.className+" ")},s=function(a,b){r(a,b)||(a.className+=" "+b)},t=function(a,b){var c=" "+a.className.replace(/[\t\r\n]/g," ")+" ";if(r(a,b)){for(;c.indexOf(" "+b+" ")>=0;)c=c.replace(" "+b+" "," ");a.className=c.replace(/^\s+|\s+$/g,"")}},u=function(a){var c=b.createElement("div");return c.appendChild(b.createTextNode(a)),c.innerHTML},v=function(a){a.style.opacity="",a.style.display="block"},w=function(a){if(a&&!a.length)return v(a);for(var b=0;b<a.length;++b)v(a[b])},x=function(a){a.style.opacity="",a.style.display="none"},y=function(a){if(a&&!a.length)return x(a);for(var b=0;b<a.length;++b)x(a[b])},z=function(a,b){for(var c=b.parentNode;null!==c;){if(c===a)return!0;c=c.parentNode}return!1},A=function(a){a.style.left="-9999px",a.style.display="block";var b=a.clientHeight,c=parseInt(getComputedStyle(a).getPropertyValue("padding"),10);return a.style.left="",a.style.display="none","-"+parseInt(b/2+c)+"px"},B=function(a,b){if(+a.style.opacity<1){b=b||16,a.style.opacity=0,a.style.display="block";var c=+new Date,d=function(){a.style.opacity=+a.style.opacity+(new Date-c)/100,c=+new Date,+a.style.opacity<1&&setTimeout(d,b)};d()}},C=function(a,b){b=b||16,a.style.opacity=1;var c=+new Date,d=function(){a.style.opacity=+a.style.opacity-(new Date-c)/100,c=+new Date,+a.style.opacity>0?setTimeout(d,b):a.style.display="none"};d()},D=function(c){if(MouseEvent){var d=new MouseEvent("click",{view:a,bubbles:!1,cancelable:!0});c.dispatchEvent(d)}else if(b.createEvent){var e=b.createEvent("MouseEvents");e.initEvent("click",!1,!1),c.dispatchEvent(e)}else b.createEventObject?c.fireEvent("onclick"):"function"==typeof c.onclick&&c.onclick()},E=function(b){"function"==typeof b.stopPropagation?(b.stopPropagation(),b.preventDefault()):a.event&&a.event.hasOwnProperty("cancelBubble")&&(a.event.cancelBubble=!0)};a.sweetAlertInitialize=function(){var c=b.createElement("div");c.innerHTML='<div class="sweet-overlay" tabIndex="-1"></div><div class="sweet-alert" tabIndex="-1"><div class="icon error"><span class="x-mark"><span class="line left"></span><span class="line right"></span></span></div><div class="icon warning"> <span class="body"></span> <span class="dot"></span> </div> <div class="icon info"></div> <div class="icon success"> <span class="line tip"></span> <span class="line long"></span> <div class="placeholder"></div> <div class="fix"></div> </div> <div class="icon custom"></div> <h2>Title</h2><p class="lead text-muted">Text</p><p><button class="cancel btn btn-default btn-lg" tabIndex="2">Cancel</button> <button class="confirm btn btn-lg" tabIndex="1">OK</button></p></div>',b.body.appendChild(c)},a.sweetAlert=a.swal=function(){function h(a){var b=a.keyCode||a.which;if(-1!==[9,13,32,27].indexOf(b)){for(var c=a.target||a.srcElement,d=-1,e=0;e<w.length;e++)if(c===w[e]){d=e;break}9===b?(c=-1===d?u:d===w.length-1?w[0]:w[d+1],E(a),c.focus()):void 0!==(c=13===b||32===b?-1===d?u:void 0:27!==b||v.hidden||"none"===v.style.display?void 0:v)&&D(c,a)}}function l(a){var b=a.target||a.srcElement,c=a.relatedTarget;if(r(n,"visible")){var e=-1;if(null!==c){for(var f=0;f<w.length;f++)if(c===w[f]){e=f;break}-1===e&&b.focus()}else k=b}}if(void 0===arguments[0])return a.console.error("sweetAlert expects at least 1 attribute!"),!1;var m=d({},o);switch(typeof arguments[0]){case"string":m.title=arguments[0],m.text=arguments[1]||"",m.type=arguments[2]||"";break;case"object":if(void 0===arguments[0].title)return a.console.error('Missing "title" argument!'),!1;m.title=arguments[0].title,m.text=arguments[0].text||o.text,m.type=arguments[0].type||o.type,m.allowOutsideClick=arguments[0].allowOutsideClick||o.allowOutsideClick,m.showCancelButton=void 0!==arguments[0].showCancelButton?arguments[0].showCancelButton:o.showCancelButton,m.closeOnConfirm=void 0!==arguments[0].closeOnConfirm?arguments[0].closeOnConfirm:o.closeOnConfirm,m.closeOnCancel=void 0!==arguments[0].closeOnCancel?arguments[0].closeOnCancel:o.closeOnCancel,m.confirmButtonText=o.showCancelButton?"Confirm":o.confirmButtonText,m.confirmButtonText=arguments[0].confirmButtonText||o.confirmButtonText,m.confirmButtonClass=arguments[0].confirmButtonClass||o.confirmButtonClass,m.cancelButtonText=arguments[0].cancelButtonText||o.cancelButtonText,m.imageUrl=arguments[0].imageUrl||o.imageUrl,m.imageSize=arguments[0].imageSize||o.imageSize,m.doneFunction=arguments[1]||null;break;default:return a.console.error('Unexpected type of argument! Expected "string" or "object", got '+typeof arguments[0]),!1}c(m),g(),e();for(var n=p(),q=function(a){var b=a.target||a.srcElement,c=b.className.indexOf("confirm")>-1,d=r(n,"visible"),e=m.doneFunction&&"true"===n.getAttribute("data-has-done-function");switch(a.type){case"click":if(c&&e&&d)m.doneFunction(!0),m.closeOnConfirm&&f();else if(e&&d){var g=String(m.doneFunction).replace(/\s/g,""),h="function("===g.substring(0,9)&&")"!==g.substring(9,10);h&&m.doneFunction(!1),m.closeOnCancel&&f()}else f()}},s=n.querySelectorAll("button"),t=0;t<s.length;t++)s[t].onclick=q;i=b.onclick,b.onclick=function(a){var b=a.target||a.srcElement,c=n===b,d=z(n,a.target),e=r(n,"visible"),g="true"===n.getAttribute("data-allow-ouside-click");!c&&!d&&e&&g&&f()};var u=n.querySelector("button.confirm"),v=n.querySelector("button.cancel"),w=n.querySelectorAll("button:not([type=hidden])");j=a.onkeydown,a.onkeydown=h,u.onblur=l,v.onblur=l,a.onfocus=function(){a.setTimeout(function(){void 0!==k&&(k.focus(),k=void 0)},0)}},a.swal.setDefaults=function(a){if(!a)throw new Error("userParams is required");if("object"!=typeof a)throw new Error("userParams has to be a object");d(o,a)},function(){"complete"===b.readyState||"interactive"===b.readyState&&b.body?sweetAlertInitialize():b.addEventListener?b.addEventListener("DOMContentLoaded",function(){b.removeEventListener("DOMContentLoaded",arguments.callee,!1),sweetAlertInitialize()},!1):b.attachEvent&&b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&(b.detachEvent("onreadystatechange",arguments.callee),sweetAlertInitialize())})}()}(window,document),SHA256_hexchars=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"),SHA256_K=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),function(){"use strict";function checkJqueryVersion(){var version=$.fn.jquery.split(" ")[0].split(".");return!(version[0]<2&&version[1]<9||1===version[0]&&9===version[1]&&version[2]<1||version[0]>2)}function jqueryReady(){$("head").after("<style> #feedbackButton { position: fixed; bottom: 30px; right: 30px; z-index: 1; width: 80px; height: 80px; font-size: 1em; color: #fff; background: #2C98DE; border: none; border-radius: 50%; box-shadow: 0 3px 6px rgba(0,0,0,.275); outline: none; margin: auto;}</style>"),FBE.addFeedbackButton()}var FBE_Factory={listEntry:function(id,subject,predicate,object,type){return'<div id="feedbackListEntry'+id+'" data-id="'+id+'"> <div class="form-group">   <input type="text" class="form-control" name="predicate" data_id="'+id+'" data_original="'+predicate+'" value="'+predicate+'" size="37" readonly> </div> <div class="form-group">   <textarea type="text" class="form-control" name="object" data_id="'+id+'" data_type="'+type+'" cols="48" readonly>'+object+'</textarea> </div> <button class="btn btn-info feedbackEdit"><i class="fa fa-edit"></i></button> <button class="btn btn-danger feedbackRemove"><i class="fa fa-remove"></i></button></div>'},listEntryFromRDF:function(i,element){return FBE_Factory.listEntry(i,element.subject,element.predicate,element.object,element.datatype)},getModal:function(){return'<div class="fbe"><div id="feedbackModal" class="modal fade" tabindex="-1" role="dialog">  <div class="modal-dialog modal-lg">    <div class="modal-content">      <div class="modal-header">        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>        <h4 class="modal-title">Your Feedback</h4>      </div>      <div class="modal-body">       <div>         <h4>Do you want to edit Resources on this Page?</h4><br>         <button type="button" id="feddbackEditResources" class="btn btn-info">Create Patch</button>       </div>        <hr>        <form id="feedbackForm">         <p class="help-block">Please leave us a comment and your identity.</p>         <div class="form-group">           <input id="feedbackFormAuthor" type="url" class="form-control" placeholder="Your WebID" required>         </div>         <div class="form-group">           <input id="feedbackFormMessage" type="text" class="form-control" placeholder="Your message..." required>         </div>        </form>      </div>      <div class="modal-footer">       <button type="button" class="btn btn-primary feedbackbtn" data-dismiss="modal"><i class="fa fa-close"></i> Close</button>       <button id="feedbackModalSave" type="submit" form="feedbackForm" class="btn btn-success feedbackbtn"><i class="fa fa-download"></i> Submit</button>      </div>    </div>  </div></div></div>'},getListTemplate:function(){return'<div class="progress progress-striped active" id="feedbackModal_progressbar"><div class="progress-bar" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%"></div></div><form id="feedbackEntryList" class="form-inline"></form>'}},FBE_Handler={openFeedbackModal:function(){0!==$("#feedbackModal").size()?$("#feedbackModal").modal():(FBE.createFeedbackModal(),FBE_Handler.openFeedbackModal())},loadResources:function(event){event.preventDefault(),FBE.fillFeedbackModal()},sendFeedback:function(event){event.preventDefault(),FBE.updateChanges();var hash=SHA256_hash((new Date).toISOString());$.get(FBE.URL_RHS).done(function(data){hash=data.nexthash,console.log(hash),0===FBE.Deletions.length&&0===FBE.Inserts.length?FBE.createComment(hash):FBE.createCommit(hash)}).fail(function(){FBE.userfeedback("What the ...?","Something went terribly wrong! I am sorry, but you can not send us feedback...","error",!1)})},activateEditMode:function(event){event.preventDefault();var id=$(event.target).closest("div").attr("id");$("#"+id+" > div > input").prop("readonly",!1),$("#"+id+" > div > textarea").prop("readonly",!1),$("#"+id).find(".feedbackEdit").hide()},removeTriple:function(event){event.preventDefault();var id=$(event.target).closest("div").attr("id");$("#"+id+" > div > input").prop("readonly",!1),$("#"+id+" > div > input").addClass("remove"),$("#"+id+" > div > textarea").prop("readonly",!1),$("#"+id+" > div > textarea").addClass("remove"),$("#"+id).hide(),$("#"+id).next().hide()},addTriple:function(event){event.preventDefault();var id=parseInt($("#feedbackEntryList > div:last").attr("data_id"))+1,entry=FBE_Factory.listEntry(id,"namespace","","","")+"<br>";$("#feedbackEntryList").find(".feedbackAdd").before(entry),$("#feedbackEntryList #feedbackListEntry"+id+" > button.feedbackEdit").click(),$("#feedbackEntryList #feedbackListEntry"+id+" input").addClass("new")}},FBE={ressourceNamespace:"",ressourceName:"",Deletions:[],Inserts:[],URL_RHS:"",URL_SPE:"",object_objects:{},addFeedbackButton:function(){$("body").append('<button id="feedbackButton" type="button" class="">Give Feedback</button>'),$("#feedbackButton").click(FBE_Handler.openFeedbackModal)},createFeedbackModal:function(){$("body").append(FBE_Factory.getModal()),$("#feddbackEditResources").click(FBE_Handler.loadResources),$("#feedbackForm").submit(FBE_Handler.sendFeedback);var url=window.location.href.split("/");FBE.ressourceName=url.pop(),FBE.ressourceNamespace=url.join("/")+"/",FBE.getServiceURLs(),FBE.getTriples(!1)},fillFeedbackModal:function(){var modal=$("#feedbackModal");modal.find("#feddbackEditResources").closest("div").remove(),modal.find("hr:first").before(FBE_Factory.getListTemplate),modal.find("#feedbackEntryList").on("click","button.feedbackEdit",FBE_Handler.activateEditMode),modal.find("#feedbackEntryList").on("click","button.feedbackRemove",FBE_Handler.removeTriple),FBE.getTriples(!0)},getServiceURLs:function(){FBE.URL_RHS=$('link[rel="resourcehostingservice"]').attr("href"),FBE.isEmpty(FBE.URL_RHS)&&(FBE.URL_RHS="http://resource.feedback.aksw.org/"),FBE.URL_SPE=$('link[rel="pingback"]').attr("href"),FBE.isEmpty(FBE.URL_SPE)&&(FBE.URL_SPE=$('link[rel="pingback:to"]').attr("href"),FBE.isEmpty(FBE.URL_SPE)&&(FBE.URL_SPE="http://pingback.feedback.aksw.org/"))},getTriples:function(toInsert){var jsonURL=$('link[rel="alternate"][type="application/rdf+json"]').attr("href");console.log(jsonURL),FBE.isEmpty(jsonURL)&&(jsonURL=$('link[rel="alternate"][type="application/json"]').attr("href"));var resourceURL=FBE.extractResourceUrl();if(FBE.isEmpty(resourceURL))return void FBE.deactivateEditButton();FBE.isEmpty(jsonURL)?$.ajax({url:resourceURL,method:"GET",headers:{Accept:"application/rdf+json;q=1.0, application/json;q=0.8"},cache:!1}).done(function(data){FBE.parseAndUseNewTriples(data,toInsert,resourceURL)}).fail(function(jqxhr,textStatus,error){FBE.userfeedback("What the ...?","Something went terribly wrong! I am sorry, but you can not send us feedback...","error",!1),FBE.deactivateEditButton(),console.log(textStatus+" "+error)}):$.get(jsonURL).done(function(data){FBE.parseAndUseNewTriples(data,toInsert,resourceURL)}).fail(function(jqxhr,textStatus,error){FBE.userfeedback("What the ...?","Something went terribly wrong! I am sorry, but you can not send us feedback...","error",!1),FBE.deactivateEditButton(),console.log(textStatus+" "+error)})},deactivateEditButton:function(){$("#feddbackEditResources").addClass("disabled").prop("disabled",!0),$("#feddbackEditResources").after('<i class="help-block">We are sorry but there are no editable resources on this page.</i>')},extractResourceUrl:function(){var url=$('link[rel="foaf:primaryTopic"]').attr("href");return FBE.isEmpty(url)&&(url=$('link[rev="describedby"]').attr("href"),FBE.isEmpty(url)),url},parseAndUseNewTriples:function(data,toInsert,firstKey){var triples=data[firstKey];console.log("triples: ",triples);var namespaceParts=firstKey.split("/");FBE.ressourceName=namespaceParts[namespaceParts.length-1],FBE.ressourceNamespace=firstKey.substring(0,firstKey.length-FBE.ressourceName.length),console.log("Namespace: "+FBE.ressourceNamespace+"\n Resource: "+FBE.ressourceName),!1===toInsert&&$("#feedbackModal").find(".modal-title").text("Feedback on: "+decodeURIComponent(FBE.ressourceNamespace+FBE.ressourceName));var listEntries="",counter=1;for(var key in triples){var value=triples[key];listEntries=value.map(function(element,i){var obj=element.value;switch(element.type){case"uri":obj=FBE.checkForAngleBrackets(obj);break;case"literal":obj.startsWith('"')&&obj.endsWith('"')||(obj='"'+obj+'"'),element.datatype?obj=obj+"^^"+FBE.checkForAngleBrackets(element.datatype):element.lang&&(obj=obj+"@"+element.lang)}return FBE.object_objects[i+counter]=obj,FBE_Factory.listEntry(i+counter,firstKey,FBE.checkForAngleBrackets(key),obj,element.type)+"<br>"}).reduce(function(prev,curr){return prev+curr},listEntries),counter+=Object.keys(value).length}if(!0===toInsert){var list=$("#feedbackEntryList");list.append(listEntries),list.append('<button class="btn btn-success feedbackAdd"><i class="fa fa-plus"></i> Add Property </button>'),list.find(".feedbackAdd").click(FBE_Handler.addTriple),$("#feedbackModal_progressbar").remove()}},createComment:function(hash){var plainSubject=FBE.URL_RHS+hash+"-resource",subject="<"+plainSubject+">",nquads=subject+" <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://rdfs.org/sioc/types#Comment> .\n"+subject+" <http://rdfs.org/sioc/ns#reply_of> <"+FBE.ressourceNamespace+FBE.ressourceName+"> .\n"+subject+" <http://xmlns.com/foaf/maker> <"+$("#feedbackFormAuthor").val()+"> .\n"+subject+' <http://rdfs.org/sioc/ns#content> "'+$("#feedbackFormMessage").val()+'" .\n'+subject+' <http://www.w3.org/ns/prov#atTime> "'+(new Date).toISOString()+'"^^<http://www.w3.org/2001/XMLSchema#dateTime> .\n';FBE.sendFeedback(nquads,hash,plainSubject)},createCommit:function(hash){var plainSubject=FBE.URL_RHS+hash+"-patch",subject="<"+plainSubject+">",deletes=FBE.getDeletes(subject,"<"+FBE.ressourceNamespace+FBE.ressourceName+">"),inserts=FBE.getInserts(subject,"<"+FBE.ressourceNamespace+FBE.ressourceName+">"),nquads=subject+" <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://purl.org/vocab/changeset/schema#ChangeSet> .\n"+subject+" <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://rdfs.org/sioc/ns#Item> .\n"+subject+" <http://rdfs.org/sioc/ns#reply_of> <"+FBE.ressourceNamespace+FBE.ressourceName+"> .\n"+subject+" <http://purl.org/vocab/changeset/schema#subjectOfChange> <"+FBE.ressourceNamespace+FBE.ressourceName+"> .\n"+subject+" <http://xmlns.com/foaf/maker> <"+$("#feedbackFormAuthor").val()+"> .\n"+subject+" <http://purl.org/vocab/changeset/schema#creatorName> <"+$("#feedbackFormAuthor").val()+"> .\n"+subject+' <http://www.w3.org/ns/prov#atTime> "'+(new Date).toISOString()+'"^^<http://www.w3.org/2001/XMLSchema#dateTime> .\n'+subject+' <http://rdfs.org/sioc/ns#created_at> "'+(new Date).toISOString()+'"^^<http://www.w3.org/2001/XMLSchema#dateTime> .\n'+subject+' <http://purl.org/vocab/changeset/schema#createdDate> "'+(new Date).toISOString()+'"^^<http://www.w3.org/2001/XMLSchema#dateTime> .\n'+subject+' <http://purl.org/vocab/changeset/schema#changeReason> "'+$("#feedbackFormMessage").val()+'" .\n';FBE.sendFeedback(nquads+deletes+inserts,hash,plainSubject)},getInserts:function(baseGraph,baseRessource){var inserts="",graphExtensions="",counter=1;return 0!==FBE.Inserts.length&&(console.log("Inserts: ",FBE.Inserts),FBE.Inserts.forEach(function(element){graphExtensions+=baseGraph+" <http://purl.org/vocab/changeset/schema#addition> _:addition"+counter+" .\n",inserts+="_:addition"+counter+" <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://www.w3.org/1999/02/22-rdf-syntax-ns#Statement> .\n",inserts+="_:addition"+counter+" <http://www.w3.org/1999/02/22-rdf-syntax-ns#subject> "+baseRessource+" .\n",inserts+="_:addition"+counter+" <http://www.w3.org/1999/02/22-rdf-syntax-ns#predicate> "+element.predicate+" .\n",inserts+="_:addition"+counter+" <http://www.w3.org/1999/02/22-rdf-syntax-ns#object> "+element.object+" .\n",counter++})),graphExtensions+inserts},getDeletes:function(baseGraph,baseRessource){var deletions="",graphExtensions="",counter=1;return 0!==FBE.Deletions.length&&(console.log("Deletions: ",FBE.Deletions),FBE.Deletions.forEach(function(element){graphExtensions+=baseGraph+" <http://purl.org/vocab/changeset/schema#removal> _:removal"+counter+" .\n",deletions+="_:removal"+counter+" <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://www.w3.org/1999/02/22-rdf-syntax-ns#Statement> .\n",deletions+="_:removal"+counter+" <http://www.w3.org/1999/02/22-rdf-syntax-ns#subject> "+baseRessource+" .\n",deletions+="_:removal"+counter+" <http://www.w3.org/1999/02/22-rdf-syntax-ns#predicate> "+element.predicate+" .\n",deletions+="_:removal"+counter+" <http://www.w3.org/1999/02/22-rdf-syntax-ns#object> "+element.object+" .\n",counter++})),graphExtensions+deletions},checkForAngleBrackets:function(str){return str.startsWith("http")?"<"+str+">":str},sendFeedback:function(tosend,hash,subject){console.log(tosend),$.ajax({url:FBE.URL_RHS+hash,method:"POST",data:tosend,contentType:"application/n-quads",cache:!1}).done(function(data){console.log("Pushed the following to Norms RHS"),console.log(data),FBE.pingSemanticPingbackService(hash,subject)}).fail(function(jqxhr,textStatus,error){FBE.userfeedback("What the ...?","Some strange error occured! Please revise your changes and try again","error",!0),console.log(textStatus+" "+error),console.log(jqxhr)})},userfeedback:function(heading,text,type,showOnConfirm){$("#feedbackModal").modal("hide"),$("#feedbackModal").on("hidden.bs.modal",function(){swal({title:heading,text:text,type:type},function(){!0===showOnConfirm&&$("#feedbackModal").modal("show")}),$("#feedbackModal").unbind("hidden.bs.modal")})},pingSemanticPingbackService:function(hash,subject){var ping={source:subject,target:FBE.ressourceNamespace+FBE.ressourceName,comment:hash+" at "+(new Date).toString()};$("#feedbackModalSave i").remove(),$("#feedbackModalSave").prepend(' <i class="fa fa-spinner fa-pulse"></i>'),$.ajax({url:FBE.URL_SPE,method:"POST",data:ping,cache:!1}).done(function(){FBE.userfeedback("Thank you!","You have done a great Job! We have sent your changes to our Mastermind.","success",!1)}).fail(function(jqxhr,textStatus,error){console.log("error is:"),console.log(textStatus+" "+error),console.log(textStatus),console.log(error),console.log(jqxhr),FBE.userfeedback("What the ...?","Some strange error occured! We are sorry, that is our fault.... Please try again later!","error",!0)}).always(function(){$("#feedbackModalSave i").remove(),$("#feedbackModalSave").prepend(' <i class="fa fa-download"></i>')})},updateChanges:function(){FBE.Deletions=[],FBE.Inserts=[];var inputs=$("#feedbackEntryList").find("input").toArray();const textareas=$("#feedbackEntryList").find("textarea").toArray();console.log("inputs: ",inputs),console.log("textareas: ",textareas),textareas.forEach(function(i){return inputs.push(i)});var filteredInputs=inputs.filter(function(input){return void 0===input.attributes.readonly});if(console.log("filtered inputs: ",filteredInputs),0!==filteredInputs.length){console.log("We have the object array ",FBE.object_objects);var changes={};filteredInputs.forEach(function(input){if(console.log("input with name ",input.name,input),void 0===changes[input.attributes.data_id.value]&&(changes[input.attributes.data_id.value]={old:{subject:FBE.ressourceNamespace+FBE.ressourceName,key:input.attributes.data_id.value,saveThis:!0},newel:{subject:FBE.ressourceNamespace+FBE.ressourceName,key:input.attributes.data_id.value,saveThis:!0}}),"predicate"===input.name)changes[input.attributes.data_id.value].old.predicate=input.attributes.data_original.value,changes[input.attributes.data_id.value].newel.predicate=input.value;else{var old_object=FBE.object_objects[input.attributes.data_id.value];"literal"===input.attributes.data_type.value&&(old_object=FBE.transformLiteral(old_object)),changes[input.attributes.data_id.value].old.object=old_object;var new_object=input.value;"literal"===input.attributes.data_type.value&&(new_object=FBE.transformLiteral(new_object)),changes[input.attributes.data_id.value].newel.object=new_object}$(input).hasClass("new")&&(changes[input.attributes.data_id.value].old.saveThis=!1),$(input).hasClass("remove")&&(changes[input.attributes.data_id.value].newel.saveThis=!1)});for(var key in changes)!0===changes[key].old.saveThis&&FBE.Deletions.push(changes[key].old),!0===changes[key].newel.saveThis&&FBE.Inserts.push(changes[key].newel);console.log("made from changes ",changes," that: ",FBE.Deletions,FBE.Inserts)}},transformLiteral:function(literal){if(literal.startsWith('"')&&literal.endsWith('"')){console.log("literal");const temp=literal.substr(1,literal.length-2);literal='"'+temp.replace(/"/g,'\\"')+'"',literal=literal.replace(/(\r\n|\n|\r)/gm,"\\n")}else if(literal.includes('"^^<')){console.log("literal with datatype");var temp=literal.substr(1,literal.indexOf('"^^<')-1);temp=temp.replace(/(\r\n|\n|\r)/gm,"\\n"),literal='"'+temp.replace(/"/g,'\\"')+literal.substr(literal.indexOf('"^^<'))}return literal},isEmpty:function(val){return""===val||val==={}||null===val||void 0===val||val instanceof Array&&0===val.length},arrowFunctionsAvaiable:function(){var toEval="function X(){var test = [1,2,3]; test.map(x => x*2);}";try{return eval(toEval),!0}catch(e){return!1}}};document.addEventListener("DOMContentLoaded",function(){if(FBE.arrowFunctionsAvaiable()){var waitForJQuery=function(){"undefined"==typeof jQuery?window.setTimeout(function(){console.warn("waitForJQuery"),waitForJQuery()},100):checkJqueryVersion?jqueryReady():console.log("Seems you are using a very old JQuery version. We need at least version 1.9.1 or higher!")};if("undefined"==typeof jQuery){var script=document.createElement("script");script.src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.0/jquery.min.js",script.type="text/javascript",document.getElementsByTagName("head")[0].appendChild(script)}waitForJQuery()}else console.log("Hey there... seems that your are using a very old browser or at least a browser that isn not supporting features that we need. I am sorry, but we disabled the feedback feature. Please use another browser!")})}();